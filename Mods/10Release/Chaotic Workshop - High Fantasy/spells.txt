
Def MagExOneTimeAbility(SpellName01,SpellName02, SpellDesc, SpellEffect, SpellSymbol)
SpellName01
{
  effect = AI And{} 0 1 Name SpellName02 Description SpellDesc {
    SpellEffect
    RemoveAbility SpellName01
  }
  symbol = SpellSymbol
  cooldown = 1
}
End

Def MagExTryMagicAttack(DamageType , TrainingType, AreaSize, TrueOrNot, aremessage, ismessage )
  TryNoFriendlyFire(
    {
      CreatureMessage {aremessage ismessage}
	  SetCreatureFlag "frienldlyfire" TrueOrNot
	  Filter CreatureFlag "frienldlyfire" {
		Area AreaSize {Damage DamageType TrainingType}
	  } 
	  Filter Not CreatureFlag "frienldlyfire"
	  {
		Filter Enemy { Area AreaSize {Damage DamageType TrainingType}}
	  } 
    },
    CreatureMessage {aremessage ismessage}
  )
End

###########################################################
# 						keepers							  #
###########################################################

# dungeon master spells

"magex_dm_summon_imps"
{
  symbol = "üêù"
  effect = Name "summon imp" Summon "MAGES_SUMMON_IMP" {3 6} 100
  cooldown = {30 61}
  sound = "SPELL_SUMMON_INSECTS"
}

"magex_dm_telepathy"
{
  symbol = "üõ°"
  effect = Name "telepathy" Lasting 20 TELEPATHY
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_dm_greater_telepathy"
{
  upgrade = "magex_dm_telepathy"
  symbol = "üõ°"
  effect = Name "telepathy" Lasting 40 TELEPATHY
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}


"magex_dm_expert_teleport"
{
  upgrade = "advanced teleport"
  symbol = "üåÄ"
  effect = Name "expert teleport" Teleport
  range = 8
  cooldown = {40 160}
  endOnly = true
  sound = "SPELL_TELEPORT"
}

# grand necromancer

"magex_gn_summon_zombie"
{
  symbol = "üêù"
  effect = Name "unearth" Summon "MAGES_SUMMON_ZOMBIE_WORKER" {1 3} 100
  cooldown = {30 61}
  sound = "SPELL_SUMMON_INSECTS"
}

"magex_gn_crubling_earth"
{
  symbol = "X"
  effect = Name "unearth" Chain { 
								DestroyWalls DIG 
								Chance 0.02 DropItems {"Skeleton"} {1}
							}
  range = 7
  cooldown = 10
  blockedByWall = false
}

"magex_gn_darkness"
{
  symbol = "üí™"
  effect = Name "touch of darkness" Chain {Lasting 40 DARKNESS_SOURCE Lasting 40 MAGEX_DARKNESS_RESISTANT  Lasting 40 MAGEX_NECROTIC_RESISTANT }
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_gn_advaned_darkness"
{
  upgrade = "magex_gn_darkness"
  symbol = "üí™"
  effect = Name "advanced touch of darkness" Chain {Lasting 40 DARKNESS_SOURCE Lasting 40 MAGEX_DARKNESS_RESISTANT  Lasting 40 MAGEX_NECROTIC_RESISTANT }
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_gn_mass_darkness"
{
  upgrade = "magex_gn_advaned_darkness"
  symbol = "üí™"
  effect = Name "mass touch of darkness"  Area 10 Filter Not Enemy Chain {Lasting 40 DARKNESS_SOURCE Lasting 40 MAGEX_DARKNESS_RESISTANT  Lasting 40 MAGEX_NECROTIC_RESISTANT }
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

MagExOneTimeAbility("magex_gn_dark_presence", "dark presence", "gives you an dark presence", Permanent DARKNESS_SOURCE , "üéØ")

# dungeon master spells

"magex_ww_summon_angels"
{
  symbol = "üêù"
  effect = Name "summon helpers" Summon "MAGEX_CHERUB_WORKER" {3 6} 100
  cooldown = {30 61}
  sound = "SPELL_SUMMON_INSECTS"
}

###########################################################
# 						wizards							  #
###########################################################

# toximancy spells

"magex_poison_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "poison splash" Description "Shoots a poison splash"
  Chain { Area 1 Lasting 50 POISON}
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 8
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_advanced_poison_bolt"
{
  upgrade = "magex_poison_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "poison splash" Description "Shoots a poison splash"
  Chain { Area 2 Lasting 50 POISON}
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 12
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_expert_poison_bolt"
{
  upgrade = "magex_advanced_poison_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "poison splash" Description "Shoots a poison splash"
  Chain { Area 3 Lasting 50 POISON}
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 16
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_mass_cure_poison"
{
  upgrade = "advanced cure poison"
  symbol = "‚öï"
  effect = Name "mass cure poison" Area 10 Filter Not Enemy RemoveLasting POISON
  cooldown = {30 81}
  sound = "SPELL_CURE_POISON"
}

"magex_mass_poison_resisntance"
{
  upgrade = "poison resistance"
  symbol = "üêç"
  effect = Name "mass poison resistance" Area 10 Filter Not Enemy Lasting POISON_RESISTANT
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_advanced_poison_breath"
{
  upgrade = "poison breath"
  symbol = "‚ò†"
  effect = Name "poison breath" Area 2 EmitGas "POISON_GAS" 0.5
  fx = {FLAMETHROWER ColorId GREEN}
  range = 6
  cooldown = {15 31}
  sound = "SPELL_BLAST"
  message = "breathe poison!" "breathes poison!"
}

"magex_expert_poison_breath"
{
  upgrade = "magex_advanced_poison_breath"
  symbol = "‚ò†"
  effect = Name "poison breath" Area 3 EmitGas "POISON_GAS" 0.5
  fx = {FLAMETHROWER ColorId GREEN}
  range = 8
  cooldown = {15 31}
  sound = "SPELL_BLAST"
  message = "breathe poison!" "breathes poison!"
}

"magex_poison_cloud"
{
  symbol = "üå´"
  effect = Name "poisionous fog" Description "Creates a poisionous cloud." Area 4 Filter DistanceD none 3.2 EmitGas "POISON_GAS" 1
  cooldown = {30 61}
}

MagExOneTimeAbility("magex_poison_resistance_self","poison resistance self", "Becomes resistant to poison.", Permanent POISON_RESISTANT, "üéØ")

# lightning spells

"magex_elemental_storm_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "lightning bolt" Description "Shoots a magex_lightning_bolt"
      MagExTryMagicAttack(MAGEX_LIGHTNING_DAMAGE, SPELL, 0, true, "are hit by the bolt", "is hit by the bolt")
  projectileViewId = {"magex_blast" ColorId PURPLE }
  range = 12
  cooldown = {4}
  sound = "SPELL_BLAST"
}

# plague spells

"magex_cure_plague"
{
  symbol = "‚öï"
  effect = Name "cure plague" RemoveLasting PLAGUE
  cooldown = {25 51}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_plague_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "poison splash" Description "Shoots a poison splash"
  Chain { Area 1 EmitGas "MAGEX_PLAGUE_WIND" 0.25 }
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 8
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_advanced_plague_bolt"
{
  upgrade = "magex_plague_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "poison splash" Description "Shoots a poison splash"
  Chain { Area 2 EmitGas "MAGEX_PLAGUE_WIND" 0.30 }
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 12
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_expert_plague_bolt"
{
  upgrade = "magex_advanced_plague_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "poison splash" Description "Shoots a poison splash"
  Chain { Area 3 EmitGas "MAGEX_PLAGUE_WIND" 0.35 }
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 16
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_mass_cure_plague"
{
  upgrade = "magex_cure_plague"
  symbol = "‚öï"
  effect = Name "mass cure plague" Area 10 Filter Not Enemy RemoveLasting PLAGUE
  cooldown = {30 81}
  sound = "SPELL_CURE_POISON"
}

"magex_plague_resistance"
{
  symbol = "üêç"
  effect = Lasting PLAGUE_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_plague_resisntance"
{
  upgrade = "magex_plague_resistance"
  symbol = "üêç"
  effect = Name "mass plague resistance" Area 10 Filter Not Enemy Lasting PLAGUE_RESISTANT
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_plague_breath"
{
  symbol = "‚ò†"
  effect = Name "plague breath" Area 2 EmitGas "MAGEX_PLAGUE_WIND" 0.75
  fx = {FLAMETHROWER ColorId GREEN}
  range = 6
  cooldown = {15 31}
  sound = "SPELL_BLAST"
  message = "breathe plague!" "breathes plague!"
}

"magex_advanced_plague_breath"
{
  upgrade = "magex_plague_breath"
  symbol = "‚ò†"
  effect = Name "plague breath" Area 3 EmitGas "MAGEX_PLAGUE_WIND" 0.80
  fx = {FLAMETHROWER ColorId GREEN}
  range = 8
  cooldown = {15 31}
  sound = "SPELL_BLAST"
  message = "breathe plague!" "breathes plague!"
}

"magex_expert_plague_breath"
{
  upgrade = "magex_advanced_plague_breath"
  symbol = "‚ò†"
  effect = Name "plague breath" Area 4 EmitGas "MAGEX_PLAGUE_WIND" 0.85
  fx = {FLAMETHROWER ColorId GREEN}
  range = 10
  cooldown = {15 31}
  sound = "SPELL_BLAST"
  message = "breathe plague!" "breathes plague!"
}

MagExOneTimeAbility("magex_plague_resistance_self","plague resistance self", "Becomes resistant to poison.", Permanent PLAGUE_RESISTANT, "üéØ")

# lightning spells
"magex_lightning_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "lightning bolt" Description "Shoots a lightning bolt"
  Chain {
	  { Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the bolt", "is hit by the bolt")}
  projectileViewId = {"magex_blast" ColorId PURPLE }
  range = 4
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_advanced_lightning_bolt"
{
  upgrade = "magex_lightning_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "lightning bolt" Description "Shoots a lightning bolt"
  Chain {
	  { Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")}
  projectileViewId = {"magex_blast" ColorId PURPLE }
  range = 8
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_expert_lightning_bolt"
{
  upgrade = "magex_advanced_lightning_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "lightning bolt" Description "Shoots a lightning bolt"
  Chain {
	  { Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")}
  projectileViewId = {"magex_blast" ColorId PURPLE }
  range = 12
  cooldown = {2 16}
  sound = "SPELL_BLAST"
}

"magex_lightning_charge"
{
  symbol = "‚•á"
  effect = Name "lightning charge" Lasting 30 MAGEX_LIGHTING_DISCHARGE
  cooldown = {50 101}
  targetSelf = true
  range = 6
  sound = "SPELL_CURE_POISON"
}

"magex_lightning_resistance"
{
  symbol = "üõ°"
  effect = Name "lightning resistance" Lasting 40 MAGEX_LIGHTNING_RESISTANT
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_lightning_resistance"
{
  upgrade = "magex_lightning_resistance"
  symbol = "üõ°"
  effect = Name "lightning resistance" Lasting 40 MAGEX_LIGHTNING_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_lightning_resistance"
{
  upgrade = "magex_advanced_lightning_resistance"
  symbol = "üõ°"
  effect = Name "mass lightning resistance" Area 10 Filter Not Enemy Lasting 40 MAGEX_LIGHTNING_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_lightning_damage"
{
  symbol = "üí™"
  effect = Name "lightning damage" Lasting 40 MAGEX_LIGHTNING_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_advanced_lightning_damage"
{
  upgrade = "magex_lightning_damage"
  symbol = "üí™"
  effect = Name "lightning damage" Lasting 40 MAGEX_LIGHTNING_DAMAGE
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_mass_lightning_damage"
{
  upgrade = "magex_advanced_lightning_damage"
  symbol = "üí™"
  effect = Name "mass lightning damage" Area 10 Filter Not Enemy Lasting 40 MAGEX_LIGHTNING_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}
 
"magex_storm_elemental"
{
  symbol = "üëæ"
  effect = Name "storm elemental" Summon "MAGEX_STORM_ELEMENTAL" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_advanced_storm_elemental"
{
  upgrade = "magex_storm_elemental"
  symbol = "üëæ"
  effect = Name "storm elemental" Summon "MAGEX_STORM_ELEMENTAL" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

MagExOneTimeAbility("magex_lightning_resistance_self","lightning resistance self", "Becomes resistant to lightning.", Permanent MAGEX_LIGHTNING_RESISTANT, "üéØ")

# fire spells
"magex_fire_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "fire ball" Description "Shoots a fire ball"
  Chain {
	  { Caster Lasting 0 "MAGEX_FIRE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the ball", "is hit by the ball")
	  Filter Enemy { Fire {}}}
  projectileViewId = {"magex_blast" ColorId RED }
  range = 2
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_fire_bolt"
{
  upgrade = "magex_fire_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "fire ball" Description "Shoots a fire ball"
  Chain {
	  { Caster Lasting 0 "MAGEX_FIRE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 1, true, "are hit by the ball", "is hit by the ball")
	  Filter Enemy { Fire {}}}
  projectileViewId = {"magex_blast" ColorId RED }
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_fire_bolt"
{
  upgrade = "magex_advanced_fire_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "fire ball" Description "Shoots a fire ball"
  Chain {
	  { Caster Lasting 0 "MAGEX_FIRE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 2, true, "are hit by the ball", "is hit by the ball")
	  Filter Enemy { Fire {}}}
  projectileViewId = {"magex_blast" ColorId RED }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_fire_resistance"
{
  symbol = "üõ°"
  effect = Name "fire resistance" Lasting 40 FIRE_RESISTANT
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_fire_resistance"
{
  upgrade = "magex_fire_resistance"
  symbol = "üõ°"
  effect = Name "fire resistance" Lasting 40 FIRE_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_fire_resistance"
{
  upgrade = "magex_advanced_fire_resistance"
  symbol = "üõ°"
  effect = Name "mass fire resistance" Area 10 Filter Not Enemy Lasting 40 FIRE_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_fire_damage"
{
  symbol = "üí™"
  effect = Name "fire damage" Lasting 40 FIRE_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"advanced fire damage"
{
  upgrade = "magex_fire_damage"
  symbol = "üí™"
  effect = Name "fire damage" Lasting 40 FIRE_DAMAGE
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_mass_fire_damage"
{
  upgrade = "advanced fire damage"
  symbol = "üí™"
  effect = Name "mass fire damage" Area 10 Filter Not Enemy Lasting 40 FIRE_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

MagExOneTimeAbility("magex_fire_resistance_self","fire resistance self", "Becomes resistant to fire.", Permanent FIRE_RESISTANT, "üéØ")

# ice spells
"magex_ice_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "ice shard" Description "Shoots a ice shard"
  Chain {
	  { Caster Lasting 0 "MAGEX_COLD_DAMAGE"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the shard", "is hit by the shard")
	  Filter Enemy { Ice {}}}
  projectileViewId = {"magex_core_blast" ColorId LIGHT_BLUE }
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_ice_bolt"
{
  upgrade = "magex_ice_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "ice shard" Description "Shoots a ice shard"
  Chain {
	  { Caster Lasting 0 "MAGEX_COLD_DAMAGE"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the shard", "is hit by the shard")
	  Filter Enemy { Ice {}}}
  projectileViewId = {"magex_core_blast" ColorId LIGHT_BLUE }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_ice_bolt"
{
  upgrade = "magex_advanced_ice_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "ice shard" Description "Shoots a ice shard"
  Chain {
	  { Caster Lasting 0 "MAGEX_COLD_DAMAGE"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the shard", "is hit by the shard")
	  Filter Enemy { Ice {}}}
  projectileViewId = {"magex_core_blast" ColorId LIGHT_BLUE }
  range = 12
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_ice_resistance"
{
  symbol = "üõ°"
  effect = Name "ice resistance" Lasting 40 COLD_RESISTANT
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_ice_resistance"
{
  upgrade = "magex_ice_resistance"
  symbol = "üõ°"
  effect = Name "ice resistance" Lasting 40 COLD_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_ice_resistance"
{
  upgrade = "magex_advanced_ice_resistance"
  symbol = "üõ°"
  effect = Name "ice resistance" Area 10 Filter Not Enemy Lasting 40 COLD_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_ice_damage"
{
  symbol = "üí™"
  effect = Name "ice damage" Lasting 40 MAGEX_COLD_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_advanced_ice_damage"
{
  upgrade = "magex_ice_damage"
  symbol = "üí™"
  effect = Name "ice damage" Lasting 40 MAGEX_COLD_DAMAGE
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_mass_ice_damage"
{
  upgrade = "magex_advanced_ice_damage"
  symbol = "üí™"
  effect = Name "mass ice damage" Area 10 Filter Not Enemy Lasting 40 MAGEX_COLD_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_ice_elemental"
{
  symbol = "üëæ"
  effect = Name "ice elemental" Summon "MAGEX_ICE_ELEMENTAL" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}
"magex_advanced_ice_elemental"
{
  upgrade = "magex_ice_elemental"
  symbol = "üëæ"
  effect = Name "ice elemental" Summon "MAGEX_ICE_ELEMENTAL" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

MagExOneTimeAbility("magex_cold_resistance_self", "cold resistance self", "Becomes resistant to cold.", Permanent COLD_RESISTANT, "üéØ")

# acid spells
"magex_acid_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "acid splash" Description "Shoots a acid shard"
  Chain {
	  { Caster Lasting 0 "MAGEX_ACID_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the splash", "is hit by the splash")
	  Filter Enemy { Acid {}}}
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_acid_bolt"
{
  upgrade = "magex_acid_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "acid splash" Description "Shoots a acid splash"
  Chain {
	  { Caster Lasting 0 "MAGEX_ACID_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the splash", "is hit by the splash")
	  Filter Enemy { Acid {}}}
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_acid_bolt"
{
  upgrade = "magex_advanced_acid_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "acid splash" Description "Shoots a acid splash"
  Chain {
	  { Caster Lasting 0 "MAGEX_ACID_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the splash", "is hit by the splash")
	  Filter Enemy { Acid {}}}
  projectileViewId = {"magex_bubble_blast" ColorId GREEN }
  range = 12
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_acid_resistance"
{
  symbol = "üõ°"
  effect = Name "acid resistance" Lasting 40 ACID_RESISTANT
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_acid_resistance"
{
  upgrade = "magex_acid_resistance"
  symbol = "üõ°"
  effect = Name "acid resistance" Lasting 40 ACID_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_acid_resistance"
{
  upgrade = "magex_advanced_acid_resistance"
  symbol = "üõ°"
  effect = Name "acid resistance" Area 10 Filter Not Enemy Lasting 40 ACID_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_acid_damage"
{
  symbol = "üí™"
  effect = Name "acid damage" Lasting 40 MAGEX_ACID_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_advanced_acid_damage"
{
  upgrade = "magex_acid_damage"
  symbol = "üí™"
  effect = Name "acid damage" Lasting 40 MAGEX_ACID_DAMAGE
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_mass_acid_damage"
{
  upgrade = "magex_advanced_acid_damage"
  symbol = "üí™"
  effect = Name "mass acid damage" Area 10 Filter Not Enemy Lasting 40 MAGEX_ACID_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_acid_elemental"
{
  symbol = "üëæ"
  effect = Name "acid elemental" Summon "MAGEX_ACID_ELEMENTAL" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}
"magex_advanced_acid_elemental"
{
  upgrade = "magex_acid_elemental"
  symbol = "üëæ"
  effect = Name "acid elemental" Summon "MAGEX_ACID_ELEMENTAL" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_acid_stream-elemental"
{
  symbol = "üúÖ"
  effect = Name "acid stream" Chain{ Acid{} Damage ACID_DAMAGE SHOOT PlaceFurniture "MAGEX_ACID" }
  fx = {FLAMETHROWER ColorId YELLOW}
  range = 4
  cooldown = {15 31}
  message = "spit acid!" "spits acid!"
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_acid_stream_leaves"
{
  symbol = "üúÖ"
  effect = Name "acid stream" Chain{{ Caster Lasting 0 "MAGEX_ACID_SPELL"} Acid{} PlaceFurniture "MAGEX_ACID" Damage SPELL_DAMAGE SPELL}
  fx = {FLAMETHROWER ColorId YELLOW}
  range = 4
  cooldown = {15 31}
  message = "spit acid!" "spits acid!"
}

MagExOneTimeAbility("magex_acid_resistance_self", "acid resistance self", "Becomes resistant to acid.", Permanent ACID_RESISTANT, "üéØ")

# dark spells
"magex_dark_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "Invoke Darkness" Description "invokes darkness in form of ray"
  Chain {
	  { Caster Lasting 0 "MAGEX_DARKNESS_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the ray", "is hit by the ray")
	  Filter Enemy { Lasting 5 PANIC }}
  projectileViewId = {"magex_blast" ColorId BLACK }
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_dark_bolt"
{
  upgrade = "magex_dark_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "Invoke Darkness" Description "invokes darkness in form of ray"
  Chain {
	  { Caster Lasting 0 "MAGEX_DARKNESS_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the ray", "is hit by the ray")
	  Filter Enemy { Lasting 5 PANIC }}
  projectileViewId = {"magex_blast" ColorId BLACK }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_dark_bolt"
{
  upgrade = "magex_advanced_dark_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "invoke Darkness" Description "invokes darkness in form of ray"
  Chain {
	  { Caster Lasting 0 "MAGEX_DARKNESS_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the ray", "is hit by the ray")
	  Filter Enemy { Lasting 5 PANIC }}
  projectileViewId = {"magex_blast" ColorId BLACK }
  range = 10
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_dark_resistance"
{
  symbol = "üõ°"
  effect = Name "darkness resistance" Lasting 40 MAGEX_DARKNESS_RESISTANT
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_dark_resistance"
{
  upgrade = "magex_dark_resistance"
  symbol = "üõ°"
  effect = Name "darkness resistance" Lasting 40 MAGEX_DARKNESS_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_dark_resistance"
{
  upgrade = "magex_advanced_dark_resistance"
  symbol = "üõ°"
  effect = Name "mass darkness resistance" Area 10 Filter Not Enemy Lasting 40 MAGEX_DARKNESS_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_dark_damage"
{
  symbol = "üí™"
  effect = Name "darkness damage" Lasting 40 MAGEX_DARKNESS_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_advanced_dark_damage"
{
  upgrade = "magex_dark_damage"
  symbol = "üí™"
  effect = Name "darkness damage" Lasting 40 MAGEX_DARKNESS_DAMAGE
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_mass_dark_damage"
{
  upgrade = "magex_advanced_dark_damage"
  symbol = "üí™"
  effect = Name "mass darkness damage" Area 10 Filter Not Enemy Lasting 40 MAGEX_DARKNESS_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_dark_elemental"
{
  symbol = "üëæ"
  effect = Name "shadow terror" Summon "MAGEX_SHADOW_TERROR" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}
"magex_advanced_dark_elemental"
{
  upgrade = "magex_dark_elemental"
  symbol = "üëæ"
  effect = Name "shadow terror" Summon "MAGEX_SHADOW_TERROR" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_dark_shere"
{
  symbol = "üå´"
  effect = Name "night sphere" Description "Creates a sphere of life sapping darkness." Area 4 Filter DistanceD none 3.2 EmitGas "MAGEX_DARKNESS_GAS" 1
  range = 8
  cooldown = {30 61}
}

MagExOneTimeAbility("magex_dark_resistance_self","dark resistance self", "Becomes resistant to darkness.", Permanent MAGEX_DARKNESS_RESISTANT, "üéØ")

# light spells
"magex_light_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "Invoke light" Description "invokes light in form of ray"
  Chain {
	  { Caster Lasting 0 "MAGEX_LIGHT_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the ray", "is hit by the ray")
	  Filter Enemy { Lasting 5 BLIND }}
  projectileViewId = {"magex_blast" ColorId YELLOW }
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_light_bolt"
{
  upgrade = "magex_light_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "Invoke light" Description "invokes light in form of ray"
  Chain {
	  { Caster Lasting 0 "MAGEX_LIGHT_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the ray", "is hit by the ray")
	  Filter Enemy { Lasting 5 BLIND }}
  projectileViewId = {"magex_blast" ColorId YELLOW }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_light_bolt"
{
  upgrade = "magex_advanced_light_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "invoke light" Description "invokes light in form of ray"
  Chain {
	  { Caster Lasting 0 "MAGEX_LIGHT_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the ray", "is hit by the ray")
	  Filter Enemy { Lasting 5 BLIND }}
  projectileViewId = {"magex_blast" ColorId YELLOW }
  range = 10
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_light_resistance"
{
  symbol = "üõ°"
  effect = Name "light resistance" Lasting 40 MAGEX_LIGHT_RESISTANT
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"advanced light resistance"
{
  upgrade = "magex_light_resistance"
  symbol = "üõ°"
  effect = Name "light resistance" Lasting 40 MAGEX_LIGHT_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"mass light resistance"
{
  upgrade = "advanced light resistance"
  symbol = "üõ°"
  effect = Name "light resistance" Area 10 Filter Not Enemy Lasting 40 MAGEX_LIGHT_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_light_damage"
{
  symbol = "üí™"
  effect = Name "light damage" Lasting 40 MAGEX_LIGHT_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_advanced_light_damage"
{
  upgrade = "magex_light_damage"
  symbol = "üí™"
  effect = Name "light damage" Lasting 40 MAGEX_LIGHT_DAMAGE
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_mass_light_damage"
{
  upgrade = "magex_advanced_light_damage"
  symbol = "üí™"
  effect = Name "mass light damage" Area 10 Filter Not Enemy Lasting 40 MAGEX_LIGHT_DAMAGE
  cooldown = {30 81}
  sound = "SPELL_STR_BONUS"
}

"magex_light_elemental"
{
  symbol = "üëæ"
  effect = Name "call lightbringer" Summon "MAGEX_LIGHTBRINGER" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_advanced_light_elemental"
{
  upgrade = "magex_light_elemental"
  symbol = "üëæ"
  effect = Name "call lightbringer" Summon "MAGEX_LIGHTBRINGER" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

MagExOneTimeAbility("magex_light_resistance_self", "light resistance self", "Becomes resistant to light.", Permanent MAGEX_LIGHT_RESISTANT, "üéØ")

# earth spells
"magex_rock_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "throw rock" Description "conjures and flying rock to hit the enemy"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
	  { Caster Lasting 0 "MAGEX_EARTHPOWER"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the boulder", "is hit by the boulder")}
  projectileViewId = {"magex_core_blast" ColorId BROWN }
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_rock_bolt"
{
  upgrade = "magex_rock_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "throw rock" Description "conjures and flying rock to hit the enemy"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
	  { Caster Lasting 0 "MAGEX_EARTHPOWER"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the boulder", "is hit by the boulder")}
  projectileViewId = {"magex_core_blast" ColorId BROWN }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_rock_bolt"
{
  upgrade = "magex_advanced_rock_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "throw rock" Description "conjures and flying rock to hit the enemy"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
	  { Caster Lasting 0 "MAGEX_EARTHPOWER"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the boulder", "is hit by the boulder")}
  projectileViewId = {"magex_core_blast" ColorId BROWN }
  range = 12
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_rock_resistance"
{
  symbol = "üõ°"
  effect = Name "stoneskin" Lasting 40 MAGEX_STONESKIN
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_rock_resistance"
{
  upgrade = "magex_rock_resistance"
  symbol = "üõ°"
  effect = Name "stoneskin" Lasting 40 MAGEX_STONESKIN
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_rock_resistance"
{
  upgrade = "magex_advanced_rock_resistance"
  symbol = "üõ°"
  effect = Name "stoneskin" Area 10 Filter Not Enemy Lasting 40 MAGEX_STONESKIN
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_rock_elemental"
{
  symbol = "üëæ"
  effect = Name "earth elemental" Summon "EARTH_ELEMENTAL" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_advanced_rock_elemental"
{
  upgrade = "magex_rock_elemental"
  symbol = "üëæ"
  effect = Name "earth elemental" Summon "EARTH_ELEMENTAL" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_rock_dig"
{
  symbol = "X"
  effect = Name "dig" DestroyWalls DIG
  range = 1
  cooldown = {10 41}
  blockedByWall = false
}

"magex_advanced_rock_dig"
{
  upgrade = "magex_rock_dig"
  symbol = "X"
  effect = Name "dig" DestroyWalls DIG
  range = 2
  cooldown = {10 41}
  blockedByWall = false
}

"magex_expert_rock_dig"
{
  upgrade = "magex_advanced_rock_dig"
  symbol = "X"
  effect = Name "dig" Area 1 DestroyWalls DIG
  range = 2
  cooldown = {10 41}
  blockedByWall = false
}

"magex_rock_summon_mountain"
{
  symbol = "ùçî"
  effect =  Name "summon mountain" CustomArea PlaceFurniture "MOUNTAIN" { {0 -2} {0 -1} {0 0} {0 1} {0 2} }
  endOnly = true
  range = 2
  cooldown = {15 31}
  sound = "SPELL_BLAST"
}

"magex_advanced_rock_summon_mountain"
{
  upgrade = "magex_rock_summon_mountain"
  symbol = "ùçî"
  effect =  Name "summon mountain" CustomArea PlaceFurniture "MOUNTAIN2" { {0 -2} {0 -1} {0 0} {0 1} {0 2} }
  endOnly = true
  range = 2
  cooldown = {15 31}
  sound = "SPELL_BLAST"
}

# water spells
"magex_water_bolt"
{
  symbol = "‚•á"
  effect = Name "water whip" Description "conjures a steam of water and uses it like whip on the enemy"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the whip", "is hit by the whip")}
  projectileViewId = {"magex_bubble_blast" ColorId BLUE }
  range = 2
  cooldown = {0 10}
  sound = "SPELL_BLAST"
}

"magex_advanced_water_bolt"
{
  upgrade = "magex_water_bolt"
  symbol = "‚•á"
  effect = Name "water whip" Description "conjures a steam of water and uses it like whip on the enemy"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the whip", "is hit by the whip")}
  projectileViewId = {"magex_bubble_blast" ColorId BLUE }
  range = 4
  cooldown = {0 10}
  sound = "SPELL_BLAST"
}

"magex_expert_water_bolt"
{
  upgrade = "magex_advanced_water_bolt"
  symbol = "‚•á"
  effect = Name "water whip" Description "conjures a steam of water and uses it like whip on the enemy"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the whip", "is hit by the whip")}
  projectileViewId = {"magex_bubble_blast" ColorId BLUE }
  range = 6
  cooldown = {0 10}
  sound = "SPELL_BLAST"
}

"magex_water_resistance"
{
  symbol = "üõ°"
  effect = Name "water breathing" Lasting 40 SWIMMING_SKILL
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_water_resistance"
{
  upgrade = "magex_water_resistance"
  symbol = "üõ°"
  effect = Name "water breathing" Lasting 40 SWIMMING_SKILL
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_water_resistance"
{
  upgrade = "magex_advanced_water_resistance"
  symbol = "üõ°"
  effect = Name "mass water breathing" Area 10 Filter Not Enemy Lasting 40 SWIMMING_SKILL
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_water_elemental"
{
  symbol = "üëæ"
  effect = Name "water elemental" Summon "WATER_ELEMENTAL" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_advanced_water_elemental"
{
  upgrade = "magex_water_elemental"
  symbol = "üëæ"
  effect = Name "water elemental" Summon "WATER_ELEMENTAL" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_flood"
{
  symbol = "ùçî"
  effect =  Name "Flood" Description "conjures an water to flood area around caster" Area 1 { Chain{
									{Filter Area 0 FurnitureType "SHALLOW_WATER2" {PlaceFurniture "SHALLOW_WATER1" }}
									{Filter Area 0 FurnitureType "SHALLOW_WATER1" {PlaceFurniture "WATER"}}
									{Filter Area 0 Not And {FurnitureType "WATER" FurnitureType "SHALLOW_WATER1" FurnitureType "SHALLOW_WATER2"} {PlaceFurniture "SHALLOW_WATER2"}}
									Shove}}
  endOnly = true
  range = 0
  cooldown = {100 200}
  sound = "SPELL_BLAST"
}

"magex_advanced_flood"
{
  upgrade = "magex_flood"
  symbol = "ùçî"
  effect =  Name "Flood" Description "conjures an water to flood area around caster" Area 2 { Chain{
									{Filter Area 0 FurnitureType "SHALLOW_WATER2" {PlaceFurniture "SHALLOW_WATER1" }}
									{Filter Area 0 FurnitureType "SHALLOW_WATER1" {PlaceFurniture "WATER"}}
									{Filter Area 0 Not And {FurnitureType "WATER" FurnitureType "SHALLOW_WATER1" FurnitureType "SHALLOW_WATER2"} {PlaceFurniture "SHALLOW_WATER2"}}
									Shove}}
  endOnly = true
  range = 0
  cooldown = {100 200}
  sound = "SPELL_BLAST"
}

"magex_expert_flood"
{
  upgrade = "magex_flood"
  symbol = "ùçî"
  effect =  Name "magex_flood" Description "conjures an water to flood area around caster" Area 3 { Chain{
									{Filter Area 0 FurnitureType "SHALLOW_WATER2" {PlaceFurniture "SHALLOW_WATER1" }}
									{Filter Area 0 FurnitureType "SHALLOW_WATER1" {PlaceFurniture "WATER"}}
									{Filter Area 0 Not And {FurnitureType "WATER" FurnitureType "SHALLOW_WATER1" FurnitureType "SHALLOW_WATER2"} {PlaceFurniture "SHALLOW_WATER2"}}
									Shove}}
  endOnly = true
  range = 0
  cooldown = {100 200}
  sound = "SPELL_BLAST"
}

"magex_drowning chant"
{
  symbol = "‚•á"
  effect = Lasting 30 MAGEX_DROWNING
  cooldown = {50 101}
  targetSelf = true
  range = 6
  sound = "SPELL_CURE_POISON"
}

MagExOneTimeAbility("magex_water_resistance_self", "water resistance self", "Becomes able to breathe in water.", Permanent SWIMMING_SKILL, "üéØ")

# transmuter

"magex_polymorph"
{
  symbol = "üê£"
  effect = Name "Polymorph" Description "Turn yourself or someone into a chicken temporarily!" AI Health 0 0.4 0 1 {
    Polymorph "CHICKEN" 10
	EmitGas "FOG" 0.5
  }
  targetSelf = true
  endOnly = true
  range = 4
  cooldown = {30 101}
  message = "puff" "puff"
  type = ABILITY
}

"magex_advanced_polymorph"
{
  upgrade = "magex_polymorph"
  symbol = "üê£"
  effect = Name "magex_polymorph" Description "Turn yourself or someone into a chicken temporarily!" AI Health 0 0.4 0 1 {
    Polymorph "CHICKEN" 10
	EmitGas "FOG" 0.5
  }
  targetSelf = true
  endOnly = true
  range = 4
  cooldown = {30 101}
  message = "puff" "puff"
  type = ABILITY
}

"magex_advanced_shapeshift"
{
  upgrade = "shapeshift"
  symbol = "‚áù"
  effect = Name "shapeshift" Description "Change into a random monster" AI And {} 0 1 {
    Polymorph none 200
    SetCreatureName "shapeshifter"
  }
  message = "" ""
  cooldown = 1
}

# necromancer

"magex_necrotic_blast"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "necrotic blast" Description "Shoots a mass of necrotic energy"
  Chain {
	  { Caster Lasting 0 "MAGEX_NECROTIC_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")
	  Filter Enemy {Lasting 5 MAGEX_NECROTIC_SATURATION}}
  projectileViewId = {"magex_core_blast" ColorId RED }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_necrotic_blast"
{
  upgrade = "magex_necrotic_blast"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "necrotic blast" Description "Shoots a mass of necrotic energy"
  Chain {
	  { Caster Lasting 0 "MAGEX_NECROTIC_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")
	  Filter Enemy {Lasting 5 MAGEX_NECROTIC_SATURATION}}
  projectileViewId = {"magex_core_blast" ColorId RED }
  range = 10
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_necrotic_blast"
{
  upgrade = "magex_advanced_necrotic_blast"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "necrotic blast" Description "Shoots a mass of necrotic energy"
  Chain {
	  { Caster Lasting 0 "MAGEX_NECROTIC_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")
	  Filter Enemy {Lasting 5 MAGEX_NECROTIC_SATURATION}}
  projectileViewId = {"magex_core_blast" ColorId RED }
  range = 12
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_necrotic_resistance"
{
  symbol = "üõ°"
  effect = Name "necrotic resistance" Lasting 40 MAGEX_NECROTIC_RESISTANT
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_necrotic_resistance"
{
  upgrade = "magex_necrotic_resistance"
  symbol = "üõ°"
  effect = Name "necrotic resistance" Lasting 40 MAGEX_NECROTIC_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_necrotic_resistance"
{
  upgrade = "magex_advanced_necrotic_resistance"
  symbol = "üõ°"
  effect = Name "mass necrotic resistance" Area 10 Filter Not Enemy Lasting 40 MAGEX_NECROTIC_RESISTANT
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

MagExOneTimeAbility("magex_necrotic_resistance_self", "necrotic resistance self", "Becomes resistant to necrosis.", Permanent MAGEX_NECROTIC_RESISTANT, "üéØ")

"magex_reanimate"
{
  symbol = "üë§"
  effect = Name "animate zombies" Chain {
  AnimateItems 3 5 100 CORPSE
  Area 100 Filter Not Enemy {
  Filter CreatureFlag "animated" ChooseRandom {	Polymorph "ZOMBIE" none
												Polymorph "MAGEX_SKELETON_REANIMATE" none}
  SetCreatureFlag "animated" false}}
  cooldown = {50 201}
}

"magex_advanced_reanimate"
{
  upgrade = "magex_reanimate"
  symbol = "üë§"
  effect =  Name "animate zombies" Chain {
  AnimateItems 5 7 100 CORPSE
  Area 100 Filter Not Enemy {
  Filter CreatureFlag "animated" ChooseRandom {	Polymorph "ZOMBIE" none
												Polymorph "MAGEX_SKELETON_REANIMATE" none}
  SetCreatureFlag "animated" false}}
  cooldown = {50 201}
}

"magex_exper_reanimate"
{
  upgrade = "magex_advanced_reanimate"
  symbol = "üë§"
  effect =  Name "animate corpses" Chain {
  AnimateItems 7 9 100 CORPSE
  Area 100 Filter Not Enemy {
  Filter CreatureFlag "animated" ChooseRandom {	Polymorph "ZOMBIE" none
												Polymorph "MAGEX_SKELETON_REANIMATE" none}
  SetCreatureFlag "animated" false}}
  cooldown = {50 201}
}



MagExOneTimeAbility("magex_undead_companion", "undead companion", "adds a zombie companion", AddCompanion {count = 2 statsBase = none summonFreq = 0.1 creatures = {"ZOMBIE" "MAGEX_SKELETON_REANIMATE" } }, "üéØ")
MagExOneTimeAbility("magex_more_undead_companion", "undead companion", "adds a zombie companion", AddCompanion {count = 2 statsBase = none summonFreq = 0.1 creatures = {"ZOMBIE" "MAGEX_SKELETON_REANIMATE" } }, "üéØ")
MagExOneTimeAbility("undead companion", "undead companion", "adds a zombie companion", AddCompanion {count = 2 statsBase = none summonFreq = 0.1 creatures = {"ZOMBIE" "MAGEX_SKELETON_REANIMATE" } }, "üéØ")


# wild spells

"magex_wild_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "wild blast" Description "Shoots a chaos blast"
  Chain {
      Caster Filter CreatureFlag "magex_wild_magic" {
	  ChooseRandom {
	  Caster Lasting 0 "MAGEX_FIRE_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"
	  Caster Lasting 0 "MAGEX_ACID_SPELL"
	  Caster Lasting 0 "MAGEX_DARKNESS_SPELL"
	  Caster Lasting 0 "MAGEX_NECROTIC_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHT_SPELL"
	  Caster Lasting 0 "MAGEX_COLD_SPELL"
	  Caster Lasting 0 "MAGEX_DAMAGE_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  }} 
      Caster Filter Not CreatureFlag "magex_wild_magic" {
	  ChooseRandom {
	  Caster Lasting 0 "MAGEX_FIRE_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"
	  Caster Lasting 0 "MAGEX_ACID_SPELL"
	  Caster Lasting 0 "MAGEX_DARKNESS_SPELL"
	  Caster Lasting 0 "MAGEX_NECROTIC_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHT_SPELL"
	  Caster Lasting 0 "MAGEX_COLD_SPELL"
	  Caster Lasting 0 "MAGEX_DAMAGE_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Damage SPELL_DAMAGE SPELL
	  }}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")}
  projectileViewId = {"magex_core_blast" ColorId PINK }
  range = 6
  cooldown = {4 32}
  sound = "SPELL_BLAST"
}

"magex_advanced_wild_bolt"
{
  upgrade = "magex_wild_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "wild blast" Description "Shoots a chaos blast"
  Chain {
      Caster Filter CreatureFlag "magex_wild_magic" {
	  ChooseRandom {
	  Caster Lasting 0 "MAGEX_FIRE_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"
	  Caster Lasting 0 "MAGEX_ACID_SPELL"
	  Caster Lasting 0 "MAGEX_DARKNESS_SPELL"
	  Caster Lasting 0 "MAGEX_NECROTIC_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHT_SPELL"
	  Caster Lasting 0 "MAGEX_COLD_SPELL"
	  Caster Lasting 0 "MAGEX_DAMAGE_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  }} 
      Caster Filter Not CreatureFlag "magex_wild_magic" {
	  ChooseRandom {
	  Caster Lasting 0 "MAGEX_FIRE_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"
	  Caster Lasting 0 "MAGEX_ACID_SPELL"
	  Caster Lasting 0 "MAGEX_DARKNESS_SPELL"
	  Caster Lasting 0 "MAGEX_NECROTIC_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHT_SPELL"
	  Caster Lasting 0 "MAGEX_COLD_SPELL"
	  Caster Lasting 0 "MAGEX_DAMAGE_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Damage SPELL_DAMAGE SPELL
	  }}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")}
  projectileViewId = {"magex_core_blast" ColorId PINK }
  range = 9
  cooldown = {4 32}
  sound = "SPELL_BLAST"
}

"magex_expert_wild_bolt"
{
  upgrade = "magex_advanced_wild_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "wild blast" Description "Shoots a chaos blast"
  Chain {
      Caster Filter CreatureFlag "magex_wild_magic" {
	  ChooseRandom {
	  Caster Lasting 0 "MAGEX_FIRE_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"
	  Caster Lasting 0 "MAGEX_ACID_SPELL"
	  Caster Lasting 0 "MAGEX_DARKNESS_SPELL"
	  Caster Lasting 0 "MAGEX_NECROTIC_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHT_SPELL"
	  Caster Lasting 0 "MAGEX_COLD_SPELL"
	  Caster Lasting 0 "MAGEX_DAMAGE_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  }} 
      Caster Filter Not CreatureFlag "magex_wild_magic" {
	  ChooseRandom {
	  Caster Lasting 0 "MAGEX_FIRE_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"
	  Caster Lasting 0 "MAGEX_ACID_SPELL"
	  Caster Lasting 0 "MAGEX_DARKNESS_SPELL"
	  Caster Lasting 0 "MAGEX_NECROTIC_SPELL"
	  Caster Lasting 0 "MAGEX_LIGHT_SPELL"
	  Caster Lasting 0 "MAGEX_COLD_SPELL"
	  Caster Lasting 0 "MAGEX_DAMAGE_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Caster Lasting 0 "MAGEX_SPELL_SPELL"
	  Damage SPELL_DAMAGE SPELL
	  }}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")}
  projectileViewId = {"magex_core_blast" ColorId PINK }
  range = 15
  cooldown = {4 32}
  sound = "SPELL_BLAST"
}

"magex_wild_elemental"
{
  symbol = "üëæ"
  effect = Name "wild summoning" Chain {
  Caster Filter CreatureFlag "magex_wild_magic" {
  ChooseRandom {
  Summon "MAGEX_STORM_ELEMENTAL" { 1 2 } 100
  Summon "MAGEX_ACID_ELEMENTAL" { 1 2 } 100
  Summon "EARTH_ELEMENTAL" { 1 2 } 100
  Summon "FIRE_ELEMENTAL" { 1 2 } 100 
  Summon "WATER_ELEMENTAL" { 1 2 } 100
  Summon "AIR_ELEMENTAL" { 1 2 } 100
  Summon "MAGEX_LIGHTBRINGER" { 1 2 } 100
  Summon "MAGEX_SHADOW_TERROR" { 1 2 } 100 
  }}
  Caster Filter Not CreatureFlag "magex_wild_magic" {
  ChooseRandom {
  Summon "MAGEX_STORM_ELEMENTAL" { 1 2 } 100
  Summon "MAGEX_ACID_ELEMENTAL" { 1 2 } 100
  Summon "EARTH_ELEMENTAL" { 1 2 } 100
  Summon "FIRE_ELEMENTAL" { 1 2 } 100 
  Summon "WATER_ELEMENTAL" { 1 2 } 100
  Summon "AIR_ELEMENTAL" { 1 2 } 100
  Summon "MAGEX_LIGHTBRINGER" { 1 2 } 100
  Summon "MAGEX_SHADOW_TERROR" { 1 2 } 100 
  ChooseRandom {
  SummonEnemy "MAGEX_STORM_ELEMENTAL" { 1 2 } 100
  SummonEnemy "MAGEX_ACID_ELEMENTAL" { 1 2 } 100
  SummonEnemy "EARTH_ELEMENTAL" { 1 2 } 100
  SummonEnemy "FIRE_ELEMENTAL" { 1 2 } 100 
  SummonEnemy "WATER_ELEMENTAL" { 1 2 } 100
  SummonEnemy "AIR_ELEMENTAL" { 1 2 } 100
  SummonEnemy "MAGEX_LIGHTBRINGER" { 1 2 } 100
  SummonEnemy "MAGEX_SHADOW_TERROR" { 1 2 } 100 
  }}}}
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_advanced_wild_elemental"
{
  upgrade = "magex_wild_elemental"
  symbol = "üëæ"
  effect = Name "wild summoning" Chain {
  Caster Filter CreatureFlag "magex_wild_magic" {
  ChooseRandom {
  Summon "MAGEX_STORM_ELEMENTAL" { 2 4 } 100
  Summon "MAGEX_ACID_ELEMENTAL" { 2 4 } 100
  Summon "EARTH_ELEMENTAL" { 2 4 } 100
  Summon "FIRE_ELEMENTAL" { 2 4 } 100 
  Summon "WATER_ELEMENTAL" { 2 4 } 100
  Summon "AIR_ELEMENTAL" { 2 4 } 100
  Summon "MAGEX_LIGHTBRINGER" { 2 4 } 100
  Summon "MAGEX_SHADOW_TERROR" { 2 4 } 100 
  }}
  Caster Filter Not CreatureFlag "magex_wild_magic" {
  ChooseRandom {
  Summon "MAGEX_STORM_ELEMENTAL" { 2 4 } 100
  Summon "MAGEX_ACID_ELEMENTAL" { 2 4 } 100
  Summon "EARTH_ELEMENTAL" { 2 4 } 100
  Summon "FIRE_ELEMENTAL" { 2 4 } 100 
  Summon "WATER_ELEMENTAL" { 2 4 } 100
  Summon "AIR_ELEMENTAL" { 2 4 } 100
  Summon "MAGEX_LIGHTBRINGER" { 2 4 } 100
  Summon "MAGEX_SHADOW_TERROR" { 2 4 } 100 
  ChooseRandom {
  SummonEnemy "MAGEX_STORM_ELEMENTAL" { 2 4 } 100
  SummonEnemy "MAGEX_ACID_ELEMENTAL" { 2 4 } 100
  SummonEnemy "EARTH_ELEMENTAL" { 2 4 } 100
  SummonEnemy "FIRE_ELEMENTAL" { 2 4 } 100 
  SummonEnemy "WATER_ELEMENTAL" { 2 4 } 100
  SummonEnemy "AIR_ELEMENTAL" { 2 4 } 100
  SummonEnemy "MAGEX_LIGHTBRINGER" { 2 4 } 100
  SummonEnemy "MAGEX_SHADOW_TERROR" { 2 4 } 100 
  }}}}
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_expert_wild_elemental"
{
  upgrade = "magex_advanced_wild_elemental"
  symbol = "üëæ"
  effect = Name "wild summoning" Chain {
  Caster Filter CreatureFlag "magex_wild_magic" {
  ChooseRandom {
  Summon "MAGEX_STORM_ELEMENTAL" { 3 6 } 100
  Summon "MAGEX_ACID_ELEMENTAL" { 3 6 } 100
  Summon "EARTH_ELEMENTAL" { 3 6 } 100
  Summon "FIRE_ELEMENTAL" { 3 6 } 100 
  Summon "WATER_ELEMENTAL" { 3 6 } 100
  Summon "AIR_ELEMENTAL" { 3 6 } 100
  Summon "MAGEX_LIGHTBRINGER" { 3 6 } 100
  Summon "MAGEX_SHADOW_TERROR" { 3 6 } 100 
  }}
  Caster Filter Not CreatureFlag "magex_wild_magic" {
  ChooseRandom {
  Summon "MAGEX_STORM_ELEMENTAL" { 3 6 } 100
  Summon "MAGEX_ACID_ELEMENTAL" { 3 6 } 100
  Summon "EARTH_ELEMENTAL" { 3 6 } 100
  Summon "FIRE_ELEMENTAL" { 3 6 } 100 
  Summon "WATER_ELEMENTAL" { 3 6 } 100
  Summon "AIR_ELEMENTAL" { 3 6 } 100
  Summon "MAGEX_LIGHTBRINGER" { 3 6 } 100
  Summon "MAGEX_SHADOW_TERROR" { 3 6 } 100 
  ChooseRandom {
  SummonEnemy "MAGEX_STORM_ELEMENTAL" { 3 6 } 100
  SummonEnemy "MAGEX_ACID_ELEMENTAL" { 3 6 } 100
  SummonEnemy "EARTH_ELEMENTAL" { 3 6 } 100
  SummonEnemy "FIRE_ELEMENTAL" { 3 6 } 100 
  SummonEnemy "WATER_ELEMENTAL" { 3 6 } 100
  SummonEnemy "AIR_ELEMENTAL" { 3 6 } 100
  SummonEnemy "MAGEX_LIGHTBRINGER" { 3 6 } 100
  SummonEnemy "MAGEX_SHADOW_TERROR" { 3 6 } 100 
  }}}}
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_wild_teleport"
{
  symbol = "üëÅÔ∏è"
  effect = Name "wild teleport" Escape { 3 }
  range = 3
  cooldown = {25 50}
  endOnly = true
  sound = "SPELL_TELEPORT"
}

"magex_advanced_wild_teleport"
{
  upgrade = "magex_wild_teleport"
  symbol = "üëÅÔ∏è"
  effect = Name "wild teleport" Escape { 4 }
  range = 6
  cooldown = {25 50}
  endOnly = true
  sound = "SPELL_TELEPORT"
}

"magex_wild_expert_teleport"
{
  upgrade = "magex_advanced_wild_teleport"
  symbol = "üëÅÔ∏è"
  effect = Name "wild teleport" Escape { 8 }
  range = 9
  cooldown = {25 50}
  endOnly = true
  sound = "SPELL_TELEPORT"
}
"magex_wild_polymorph"
{
  symbol = "‚áù"
  effect = Name "chatic polymorph" Description "Change into a random monster" Polymorph none 20
  message = "was transtormed!" "were transtormed!"
  range = 6
  cooldown = {25 50}
}

"magex_advanced_wild_polymorph"
{
  upgrade = "magex_wild_polymorph"
  symbol = "‚áù"
  effect = Name "chatic polymorph" Description "Change into a random monster" Polymorph none 30
  message = "was transtormed!" "were transtormed!"
  range = 8
  cooldown = {25 50}
}

"magex_expert_wild_polymorph"
{
  upgrade = "magex_advanced_wild_polymorph"
  symbol = "‚áù"
  effect = Name "chatic polymorph" Description "Change into a random monster" Polymorph none 40
  message = "was transtormed!" "were transtormed!"
  range = 10
  cooldown = {25 50}
}

MagExOneTimeAbility("magex_wild_resistance_self", "chaos resistance self", "Becomes touched by chaos.", SetCreatureFlag "magex_wild_magic" true, "üéØ")

# fell spells
"magex_fell_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "fell blast" Description "Shoots a fell blast"
  Chain {
	  { Caster Lasting 0 "MAGEX_FELL_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the blast", "is hit by the blast")
	  Caster Chain {
					RegrowBodyPart 1
					Heal { FLESH  0.05}}}
  projectileViewId = {"magex_blast" ColorId GREEN }
  range = 2
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_advanced_fell_bolt"
{
  upgrade = "magex_fell_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "fell blast" Description "Shoots a fell blast"
  Chain {
	  { Caster Lasting 0 "MAGEX_FELL_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 1, true, "are hit by the blast", "is hit by the blast")
	  Caster Chain {
					RegrowBodyPart 1
					Heal { FLESH  0.05}}}
  projectileViewId = {"magex_blast" ColorId GREEN }
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_expert_fell_bolt"
{
  upgrade = "magex_advanced_fell_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "fell blast" Description "Shoots a fell blast"
  Chain {
	  { Caster Lasting 0 "MAGEX_FELL_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 2, true, "are hit by the blast", "is hit by the blast")
	  Caster Chain {
					RegrowBodyPart 1
					Heal { FLESH  0.05}}}
  projectileViewId = {"magex_blast" ColorId GREEN }
  range = 8
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

"magex_fell_infusion"
{
  symbol = "üõ°"
  effect = Name "fell infusion" Chain {RemoveLasting MAGEX_FELL_WITHRAWAL Lasting 40 MAGEX_FELL_INFUSION}
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_advanced_fell_infusion"
{
  upgrade = "magex_fell_infusion"
  symbol = "üõ°"
  effect = Name "fell infusion" Chain {RemoveLasting MAGEX_FELL_WITHRAWAL Lasting 40 MAGEX_FELL_INFUSION}
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_mass_fell_infusion"
{
  upgrade = "magex_advanced_fell_infusion"
  symbol = "üõ°"
  effect = Name "mass fell infusion" Area 10 Filter Not Enemy Name "magex_fell_infusion" Chain {RemoveLasting MAGEX_FELL_WITHRAWAL Lasting 40 MAGEX_FELL_INFUSION}
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_fell_power_overwhelming"
{
  symbol = "üî•"
  effect = Name "power overwhelming" Chain {RemoveLasting MAGEX_FELL_WITHRAWAL Lasting 40 MAGEX_FELL_POWER_OVERWHELMING}
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_fell_meteor"
{
  symbol = "‚òÑ"
  effect = Name "fell meteor" Chain {			{ Caster Lasting 0 "MAGEX_FELL_SPELL"}
												Area 1 {DestroyWalls DIG 
												Damage SPELL_DAMAGE SPELL }
												Summon "MAGEX_FELL_GEODE_LESSER" 1 100}
  cooldown = {30 81}
  endOnly = true
  range = 8
  sound = "SPELL_METEOR_SHOWER"
}

"magex_advanced_fell_meteor"
{
  upgrade = "magex_fell_meteor"
  symbol = "‚òÑ"
  effect = Name "fell meteor" Chain {			{ Caster Lasting 0 "MAGEX_FELL_SPELL"}
												Area 1 {DestroyWalls DIG 
												Damage SPELL_DAMAGE SPELL }
												Summon "MAGEX_FELL_GEODE" 1 100}
  cooldown = {30 81}
  endOnly = true
  range = 8
  sound = "SPELL_METEOR_SHOWER"
}

"magex_expert_fell_meteor"
{
  upgrade = "magex_advanced_fell_meteor"
  symbol = "‚òÑ"
  effect = Name "fell meteor" Chain {			{ Caster Lasting 0 "MAGEX_FELL_SPELL"}
												Area 1 {DestroyWalls DIG 
												Damage SPELL_DAMAGE SPELL }
												Summon "MAGEX_FELL_GEODE_GREATER" 1 100}
  cooldown = {30 81}
  endOnly = true
  range = 8
  sound = "SPELL_METEOR_SHOWER"
}

"magex_fell_portal"
{
  symbol = "üó°Ô∏è"
  effect = MinDistanceFromStrongEnemy(2) Name "open portal" Description "Sacrifices the creature to open an portal" Chain {
            Filter Area 0 Not Enemy {
			Suicide DIE	
			PlaceFurniture "MAGEX_FELL_PORTAL"}}
  endOnly = true
  range = 1
  cooldown = 200
  sound = "SPELL_BLAST"
}

"magex_fell_binding"
{
  symbol = "üó°Ô∏è"
  effect = MinDistanceFromStrongEnemy(2) Name "open portal" Description "Sacrifices the creature to bin summoned creature" Chain {
            Filter Area 0 Not Enemy {
			Suicide DIE	
			GrantAbility "magex_fell_binding_act"}}
  endOnly = true
  range = 1
  cooldown = 200
  sound = "SPELL_BLAST"
}

"magex_fell_binding_act"
{
  symbol = "‚öï"
  effect = Name "bind summon" Chain{RemoveLasting SUMMONED 
									Caster RemoveAbility "magex_fell_binding_act"}
  cooldown = {25 51}
  range = 1
  sound = "SPELL_CURE_POISON"
}

# Illusionism

"magex_ilusion_invisibility"
{
  symbol = "üïµÔ∏è"
  effect = Name "invisibility" Lasting 40 INVISIBLE
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}
"magex_advanced_ilusion_invisibility"
{
  upgrade = "magex_ilusion_invisibility"
  symbol = "üïµÔ∏è"
  effect = Name "invisibility" Lasting 40 INVISIBLE
  targetSelf = true
  range = 1
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_mass_ilusion_invisibility"
{
  upgrade = "magex_advanced_ilusion_invisibility"
  symbol = "üïµÔ∏è"
  effect = Name "mass invisibility" Area 10 Filter Not Enemy Lasting 40 INVISIBLE
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_advanced_deception"
{
  upgrade = "deception"
  symbol = "üé≠"
  effect = Deception
  range = 1
  cooldown = {30 61}
  sound = "SPELL_DECEPTION"
}

"magex_mass_deception"
{
  upgrade = "magex_advanced_deception"
  symbol = "üïµÔ∏è"
  effect = Name "magex_mass_deception" Area 10 Filter Not Enemy Deception
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_summon_illusion"
{
  symbol = "üëæ"
  effect = Name "ilusion" Summon "MAGEX_ILLUSION" { 2 4 } 5
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_advanced_summon_illusion"
{
  upgrade = "magex_summon_illusion"
  symbol = "üëæ"
  effect = Name "ilusion" Summon "MAGEX_ILLUSION" { 4 8 } 10
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_expert_summon_illusion"
{
  upgrade = "magex_advanced_summon_illusion"
  symbol = "üëæ"
  effect = Name "ilusion" Summon "MAGEX_ILLUSION" { 6 12 } 15
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_illusion_fog"
{
  symbol = "üå´"
  effect = Name "fog" Description "Creates a fog cloud." Area 2 Filter DistanceD none 3.2 EmitGas "FOG" 1
  range = 4
  cooldown = {30 61}
}

"magex_advanced_illusion_fog"
{
  upgrade = "magex_illusion_fog"
  symbol = "üå´"
  effect = Name "fog" Description "Creates a fog cloud." Area 4 Filter DistanceD none 3.2 EmitGas "FOG" 1
  range = 6
  cooldown = {30 61}
}

"magex_expert_illusion_fog"
{
  upgrade = "magex_advanced_illusion_fog"
  symbol = "üå´"
  effect = Name "fog" Description "Creates a fog cloud." Area 6 Filter DistanceD none 3.2 EmitGas "FOG" 1
  range = 8
  cooldown = {30 61}
}
# enchantment

"magex_advanced_panic"
{
  upgrade = "panic"
  symbol = "üò±"
  effect = Lasting PANIC
  range = 10
  cooldown = {25 51}
  sound = "SPELL_STR_BONUS"
}

"magex_mass_panic"
{
  upgrade = "magex_advanced_panic"
  symbol = "üò±"
  effect = Name "mass invisibility" Area 10 Filter Enemy Lasting 40 PANIC
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"advanced pacify"
{
  upgrade = "pacify"
  symbol = "‚òÆ"
  effect = Name "pacify" Lasting PEACEFULNESS
  range = 4
  cooldown = {20 61}
  endOnly = true
  sound = "SPELL_STR_BONUS"
}

"magex_mass_pacify"
{
  upgrade = "advanced pacify"
  symbol = "‚òÆ"
  effect = Name "magex_mass_pacify" Area 10 Filter Enemy Lasting 40 PEACEFULNESS
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

# air spells
"magex_air_bolt"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "wind blast" Description "Shoots a wind blast"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the bolt", "is hit by the bolt")
	  Chain {Shove}}
  projectileViewId = {"magex_blast" ColorId LIGHT_GREEN }
  range = 2
  cooldown = {2 12}
  sound = "SPELL_BLAST"
}

"magex_advanced_air_bolt"
{
  upgrade = "magex_air_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "wind blast" Description "Shoots a wind blast"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the bolt", "is hit by the bolt")
	  Chain {Shove Shove}}
  projectileViewId = {"magex_blast" ColorId LIGHT_GREEN }
  range = 4
  cooldown = {2 12}
  sound = "SPELL_BLAST"
}

"magex_expert_air_bolt"
{
  upgrade = "magex_advanced_air_bolt"
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "wind blast" Description "Shoots a wind blast"
  Chain {
	  { Caster Lasting 0 "MAGEX_DAMAGE_SPELL"}
      MagExTryMagicAttack(SPELL_DAMAGE, SPELL, 0, true, "are hit by the bolt", "is hit by the bolt")
	  Chain {Shove Shove}}
  projectileViewId = {"magex_blast" ColorId LIGHT_GREEN }
  range = 6
  cooldown = {2 12}
  sound = "SPELL_BLAST"
}

"magex_air_flying"
{
  symbol = "X"
  effect = Name "flying" Lasting 40 FLYING
  cooldown = {50 101}
  sound = "SPELL_CURE_POISON"
}

"magex_advanced_air_flying"
{
  upgrade = "magex_air_flying"
  symbol = "X"
  effect = Name "flying" Lasting 40 FLYING
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}

"magex_mass_air_flying"
{
  upgrade = "magex_advanced_air_flying"
  symbol = "X"
  effect = Name "magex_lightning_resistance" Area 10 Filter Not Enemy Lasting 40 FLYING
  cooldown = {50 101}
  targetSelf = true
  range = 1
  sound = "SPELL_CURE_POISON"
}
 
"magex_air_elemental"
{
  symbol = "üëæ"
  effect = Name "air elemental" Summon "AIR_ELEMENTAL" { 1 2 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_advanced_air_elemental"
{
  upgrade = "magex_air_elemental"
  symbol = "üëæ"
  effect = Name "air elemental" Summon "AIR_ELEMENTAL" { 2 4 } 100
  cooldown = {30 81}
  sound = "SPELL_FIRE_SPHERE_PET"
}

"magex_air_strong_wind"
{
  symbol = "‚úàÔ∏è"
  effect = Name "strong wind" Escape {2}
  cooldown = {50 101}
  range = 5
  sound = "SPELL_TELEPORT"
}

"magex_advanced_air_strong_wind"
{
  upgrade = "magex_air_strong_wind"
  symbol = "‚úàÔ∏è"
  effect = Name "strong wind" Escape {}
  cooldown = {50 101}
  range = 5
  sound = "SPELL_TELEPORT"
}

MagExOneTimeAbility("magex_air_flying_self", "air flying self", "Becomes flying.", Permanent FLYING, "üéØ")



# nymphomancy

"magex_pacify"
{
  symbol = "‚òÆ"
  effect = Name "pacify" Lasting 5 PEACEFULNESS
  range = 4
  cooldown = {5 21}
  endOnly = true
  sound = "SPELL_STR_BONUS"
}

"magex_advanced_pacify"
{
  upgrade = "magex_pacify"
  symbol = "‚òÆ"
  effect = Name "pacify" Lasting 5 PEACEFULNESS
  range = 4
  cooldown = {5 21}
  endOnly = true
  sound = "SPELL_STR_BONUS"
}

"magex_expert_pacify"
{
  upgrade = "magex_advanced_pacify"
  symbol = "‚òÆ"
  effect = Name "pacify" Lasting 5 PEACEFULNESS
  range = 4
  cooldown = {5 21}
  endOnly = true
  sound = "SPELL_STR_BONUS"
}

"magex_horny"
{
  symbol = "üî•"
  effect = Name "enhance copulation" Description "Bestows copulation to female creatures made of flesh" Filter And {Gender FEMALE BodyMaterial FLESH }{Lasting 50 COPULATION_SKILL}
  range = 4
  cooldown = {24 85}
  endOnly = true
  sound = "SPELL_STR_BONUS"
}

"magex_advanced_horny"
{
  upgrade = "magex_horny"
  symbol = "üî•"
  effect = Name "enhance copulation" Description "Bestows copulation to female creatures"  Filter Gender FEMALE Lasting 50 COPULATION_SKILL
  range = 4
  cooldown = {24 85}
  endOnly = true
  sound = "SPELL_STR_BONUS"
}

"magex_expert_horny"
{
  upgrade = "magex_advanced_horny"
  symbol = "üî•"
  effect = Name "enhance copulation" Description "Bestows copulation"  Lasting 50 COPULATION_SKILL
  range = 4
  cooldown = {24 85}
  endOnly = true
  sound = "SPELL_STR_BONUS"
}

"magex_mass_horny"
{
  upgrade = "magex_expert_horny"
  symbol = "üõ°"
  effect = Name "mass enhance copulation" Description "Bestows copulation"  Lasting 50 COPULATION_SKILL
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_harem_I"
{
  symbol = "‚ù§Ô∏è"
  effect = Name "Summon Harem" Summon "SUCCUBUS" { 1 2 } 100
  cooldown =  { 110 200 }
  sound = "SPELL_SUMMON_INSECTS"
}

"magex_harem_II"
{
  upgrade = "magex_harem_I"
  symbol = "‚ù§Ô∏è"
  effect = Name "Summon Harem" Summon "SUCCUBUS" { 2 3 } 100
  cooldown =  { 110 200 }
  sound = "SPELL_SUMMON_INSECTS"
}

"magex_harem_III"
{
  upgrade = "magex_harem_II"
  symbol = "‚ù§Ô∏è"
  effect = Name "Summon Harem" Summon "SUCCUBUS" { 2 4 } 100
  cooldown =  { 110 200 } 
  sound = "SPELL_SUMMON_INSECTS"
}

"mages_aphrodisiac_cloud"
{
  symbol = "üå´"
  effect = Name "aphrodisiac" Description "Creates a aphrodisiac cloud." Area 4 Filter DistanceD none 3.2 EmitGas "MAGEX_APHRODISIAC" 1
  cooldown = {30 61}
}

MagExOneTimeAbility("magex_copulate_self", "copulate self", "Becomes able to copulate.", Permanent COPULATION_SKILL, "üéØ")


























###########################################################
# 						priest							  #
###########################################################


# demonology

"magex_summon_succubus"
{
  symbol = "üëæ"
  effect = Name "succubus" Summon "SUCCUBUS" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_demon"
{
  symbol = "üëæ"
  effect = Name "demon" Summon "DEMON_DWELLER" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_devil"
{
  symbol = "üëæ"
  effect = Name "devil" Summon "MAGEX_DEVIL_SUMMON" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_hellish_horde"
{
  symbol = "üëæ"
  effect = Name "hellish horde" Chain {
				Summon "SUCCUBUS" { 3 4 } 50
				Summon "DEMON_DWELLER" { 2 3 } 50
				Summon "MAGEX_DEVIL_SUMMON" { 1 2 } 50
				}
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}

# angeology

"magex_summon_galeam"
{
  symbol = "üëæ"
  effect = Name "galeam" Summon "GALEAM" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_cherub"
{
  symbol = "üëæ"
  effect = Name "cherub" Summon "MAGEX_CHERUB_SUMMON" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_angel"
{
  symbol = "üëæ"
  effect = Name "angel" Summon "ANGEL" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_angelic_host"
{
  symbol = "üëæ"
  effect = Name "angelic host" Chain {
				Summon "MAGEX_CHERUB_SUMMON" { 3 4 } 50
				Summon "GALEAM" { 2 3 } 50
				Summon "MAGEX_ANGEL_SUMMON" { 1 2 } 50
				}
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}

# shamanism

"magex_summon_spirits"
{
  symbol = "üëæ"
  effect = Name "spirit" Summon "SPIRIT" { 1 2 } 100
  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_advanced_summon_spirits"
{
  symbol = "üëæ"
  effect = Name "spirit" Summon "SPIRIT" { 2 4 } 100
  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_spirit_tribe"
{
  symbol = "üëæ"
  effect = Name "spirit tribe" Chain {
				Summon "SPIRIT" { 2 3 } 50
				SummonElement
				SummonElement
				SummonElement
				SummonElement
				}
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_mass_slow"
{
  upgrade = "slow"
  symbol = "üê¢"
  effect = Name "mass invisibility" Area 10 Filter Enemy Lasting 40 SLOWED
  cooldown = {30 61}
  sound = "SPELL_DEX_BONUS"
}

# ancestor worship

"magex_summon_ghost"
{
  symbol = "üëæ"
  effect = Name "ghost" Summon "LOST_SOUL" { 2 4 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"advanced summon ghosts"
{
  upgrade = "magex_summon_ghost"
  symbol = "üëæ"
  effect = Name "spirit" Summon "MAGEX_GUARDIAN_GHOST" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_ghost_champion"
{
  symbol = "üëæ"
  effect = Name "ghost champion" Summon "MAGEX_ANCESTRAL_CHAMPION" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_ghost_house"
{
  symbol = "üëæ"
  effect = Name "ghost house" Chain {
				Summon "LOST_SOUL" { 6 8 } 50
				Summon "MAGEX_GUARDIAN_GHOST" { 2 3 } 50
				Summon "MAGEX_ANCESTRAL_CHAMPION" { 1 2 } 50
				}
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_mass_blindness"
{
  upgrade = "blindness"
  symbol = "‚òÆ"
  effect = Name "magex_mass_blindness" Area 10 Filter Enemy Lasting 5 BLIND
  cooldown = {10 21}
  sound = "SPELL_DEX_BONUS"
}

# nature worship

"magex_summon_deer"
{
  symbol = "üëæ"
  effect = Name "deer" Summon "MAGEX_DEER_SUMMON" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_driad"
{
  symbol = "üëæ"
  effect = Name "driad" Summon "MAGEX_DRIAD_SUMMON" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_ent"
{
  symbol = "üëæ"
  effect = Name "ent" Summon "ENT" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"summon forest"
{
  symbol = "üëæ"
  effect = Name "nature vengance" Chain {
				Summon "MAGEX_DEER_SUMMON" { 3 4 } 50
				Summon "MAGEX_DRIAD_SUMMON" { 2 3 } 50
				Summon "ENT" { 1 2 } 50
				}
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_grow_tree"
{
  symbol = "ùçî"
  effect =  Name "natures growth" Chain {
			Area 3 {
				PlaceFurniture "MAGEX_GRASS"} 
			Area 3 {
				Chance 0.6								
			ChooseRandom { 
				PlaceFurniture "FLOWER1" 
				PlaceFurniture "FLOWER2" 				
				PlaceFurniture "FLOWER3"}}	
			Area 3 {				
				Chance 0.3 
			ChooseRandom { 
				PlaceFurniture "CANIF_TREE"
				PlaceFurniture "DECID_TREE"}}
				}
  endOnly = true
  range = 10
  cooldown = {150 300}
  sound = "SPELL_BLAST"
}

"magex_grow_forest"
{
  upgrade = "magex_grow_tree"
  symbol = "ùçî"
  effect =  Name "natures growth" Chain {
			Area 6 {
				PlaceFurniture "MAGEX_GRASS"} 
			Area 6 {
				Chance 0.6								
			ChooseRandom { 
				PlaceFurniture "FLOWER1" 
				PlaceFurniture "FLOWER2" 				
				PlaceFurniture "FLOWER3"}}	
			Area 6 {				
				Chance 0.3 
			ChooseRandom { 
				PlaceFurniture "CANIF_TREE"
				PlaceFurniture "DECID_TREE"}}
				}
  endOnly = true
  range = 10
  cooldown = {150 300}
  sound = "SPELL_BLAST"
}

# death worship

"magex_summon_skeletal_wolf"
{
  symbol = "üëæ"
  effect = Name "skeletal wolf" Summon "SKELETON_WOLF" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_skeleton"
{
  symbol = "üëæ"
  effect = Name "skeleton" Summon "MAGEX_SKELETON_WARRIOR_SUMMON" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_skeleton_king"
{
  symbol = "üëæ"
  effect = Name "skeleton king" Summon "MAGEX_SKELETAL_ABOMINATION_SUMMON" { 1 2 } 100
  cooldown = {81 132}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_summon_graveyard"
{
  symbol = "üëæ"
  effect = Name "graveyard rising" Chain {
				Summon "SKELETON_WOLF" { 3 4 } 50
				Summon "MAGEX_SKELETON_WARRIOR_SUMMON" { 2 3 } 50
				Summon "MAGEX_SKELETAL_ABOMINATION_SUMMON" { 1 2 } 50
				}
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_repair_undead"
{
  symbol = "üíÄ"
  effect = Name "fix undead" Filter Or { BodyMaterial UNDEAD_FLESH
      And {BodyMaterial BONE }}
  {
	RegrowBodyPart 10
  }
  range = 1
  targetSelf = true
  cooldown = 100
  sound = "TRAP_ARMING"
  message = "fixed the undead" "fixes the undead"
  type = ABILITY
}

"magex_advanced_repair_undead"
{
  upgrade = "magex_repair_undead"
  symbol = "üíÄ"
  effect = Name "fix undead" Filter Or { BodyMaterial UNDEAD_FLESH
      And {BodyMaterial BONE }}
  {
	RegrowBodyPart 10
  }
  range = 1
  targetSelf = true
  cooldown = 100
  sound = "TRAP_ARMING"
  message = "fixed the undead" "fixes the undead"
  type = ABILITY
}

"magex_mass_repair_undead"
{
  upgrade = "magex_advanced_repair_undead"
  symbol = "üíÄ"
  effect = Name "mass fix undead" Area 10 Filter Not Enemy Filter Or { BodyMaterial UNDEAD_FLESH
      And {BodyMaterial BONE }}
  {
	RegrowBodyPart 10
  }
  range = 1
  targetSelf = true
  cooldown = 100
  sound = "TRAP_ARMING"
  message = "fixed the undead" "fixes the undead"
  type = ABILITY
}

# rot worship

"magex_summon_zombie"
{
  symbol = "üëæ"
  effect = Name "zombie" Summon "SWARMER_ZOMBIE" { 1 2 } 100
  cooldown = {50 81}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_advanced_summon_zombie"
{
  symbol = "üëæ"
  effect = Name "zombie" Summon "SWARMER_ZOMBIE" { 2 4 } 100
  cooldown = {50 81}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_expert_summon_zombie"
{
  symbol = "üëæ"
  effect = Name "zombie" Summon "SWARMER_ZOMBIE" { 4 6 } 100
  cooldown = {50 81}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_hordes_of_rot"
{
  symbol = "üëæ"
  effect = Name "hordes of rot" Chain { 
										Summon "MAGEX_ABOMINATION_SUMMON" 1 50 
										Summon "SWARMER_ZOMBIE" { 8 12 } 50 }
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}


MagExOneTimeAbility("magex_zombie_companion", "zombie companion", "adds a zombie companion",AddCompanion {count = 1 statsBase = none summonFreq = 0.1 creatures = {"SWARMER_ZOMBIE" } }, "üéØ")
MagExOneTimeAbility("magex_more_zombie_companion", "zombie companion", "adds a zombie companion", AddCompanion {count = 1 statsBase = none summonFreq = 0.1 creatures = {"SWARMER_ZOMBIE" } }, "üéØ")
MagExOneTimeAbility("magex_even_more_zombie_companion", "zombie companion", "adds a zombie companion", AddCompanion {count = 1 statsBase = none summonFreq = 0.1 creatures = {"SWARMER_ZOMBIE" } }, "üéØ")
MagExOneTimeAbility("magex_much_more_zombie_companion", "zombie companion", "adds a zombie companion", AddCompanion {count = 1 statsBase = none summonFreq = 0.1 creatures = {"SWARMER_ZOMBIE" } }, "üéØ")
MagExOneTimeAbility("magex_too_much_zombie_companion", "zombie companion", "adds a zombie companion", AddCompanion {count = 1 statsBase = none summonFreq = 0.1 creatures = {"SWARMER_ZOMBIE" } }, "üéØ")


# bear worship

"magex_summon_bear"
{
  symbol = "üêª"
  effect = Name "bear" ChooseRandom { 
										Summon "MAGEX_CAVE_BEAR_SUMMON_I" { 1 2 } 100
										Summon "MAGEX_POLAR_BEAR_SUMMON_I" { 1 2 } 100
									}
  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_advanced_summon_bear"
{
  upgrade = "magex_summon_bear"
  symbol = "üêª"
  effect = Name "bear" ChooseRandom { 
										Summon "MAGEX_CAVE_BEAR_SUMMON_II" { 1 2 } 100
										Summon "MAGEX_POLAR_BEAR_SUMMON_II" { 1 2 } 100
									}
  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_expert_summon_bear"
{
  upgrade = "magex_advanced_summon_bear"
  symbol = "üêª"
  effect = Name "bear" ChooseRandom { 
										Summon "MAGEX_CAVE_BEAR_SUMMON_III" { 1 2 } 100
										Summon "MAGEX_POLAR_BEAR_SUMMON_III" { 1 2 } 100
									}

  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_bearscape_invasion"
{
  symbol = "üêª"
  effect = Name "Avatar of Bearness" Summon "MAGEX_AVATAR_OF_BEARNESS" { 1 2 } 100
  cooldown = {150 300}
  sound = "SPELL_SUMMON_SPIRIT"
}


"magex_advanced_berserker"
{
  upgrade = "berserker"
  symbol = "üêª"
  effect = Name "berskerker" Description "Change into a bear!" AI Health 0 0.4 0 1 {
    Polymorph "MAGEX_AVATAR_OF_BEARNESS" 30
  }
  message = "" ""
  cooldown = 100
}

# the emperor worship

"magex_heretic"
{
  symbol = "üï∂Ô∏è"
  effect = Name "herecy" Chain {Damage SPELL_DAMAGE SPELL Lasting 40 MAGEX_HERETIC}
  cooldown = {31 81}
  range = 5
}

"magex_advanced_heretic"
{
  upgrade = "magex_heretic"
  symbol = "üõ°Ô∏è"
  effect = Name "herecy" Chain {Damage SPELL_DAMAGE SPELL Lasting 80 MAGEX_HERETIC}
  cooldown = {31 81}
  range = 5
}

"magex_expert_heretic"
{
  upgrade = "magex_advanced_heretic"
  symbol = "üõ°Ô∏è"
  effect = Name "herecy" Chain {Damage SPELL_DAMAGE SPELL Lasting 120 MAGEX_HERETIC}
  cooldown = {31 81}
  range = 5
}

"magex_mass_heretic"
{
  upgrade = "magex_expert_heretic"
  symbol = "üõ°"
  effect = Name "herecy" Area 10 Filter Enemy Chain {Damage SPELL_DAMAGE SPELL Lasting 120 MAGEX_HERETIC}
  cooldown = {30 81}
  range = 5
  sound = "SPELL_DEX_BONUS"
}

"magex_summon_reforged"
{
  symbol = "Œ©"
  effect = Name "emperors warriors" Summon "MAGEX_REFORGED" 1 100
  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_advanced_summon_reforged"
{
  upgrade = "magex_summon_reforged"
  symbol = "Œ©"
  effect = Name "emperors warriors" Summon "MAGEX_REFORGED" 2 100
  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_expert_summon_reforged"
{
  upgrade = "magex_advanced_summon_reforged"
  symbol = "Œ©"
  effect = Name "emperors warriors" Summon "MAGEX_REFORGED" 3 100
  cooldown = {15 51}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_reforge"
{
  symbol = "‚áù"
  effect = Name "reforge" Description "Change human into an reforged" AI And {} 0 0 {
    Area 0 Filter HatedBy HATE_HUMANS {Polymorph "MAGEX_REFORGED" none}
  }
  range = 1
  cooldown = {500 750}
  sound = "SPELL_SUMMON_SPIRIT"
}

"magex_die_heretic"
{
  symbol = "‚Ñí"
  effect = Name "die heretic" Description "Causes magical and fire damage" Chain{Damage DAMAGE HIT 
																				 Filter LastingEffect MAGEX_HERETIC{Damage DAMAGE HIT}}
  range = 1
  cooldown = {5 21}
  endOnly = true
  message = "attack heretic!" "attacks heretic!"
}



###########################################################
# 						warriors						  #
###########################################################

# thug

MagExOneTimeAbility("magex_thug", "thug", "increases damage by +4", Permanent MAGEX_WARRIOR_THUG , "üéØ")

"magex_thug_scare"
{
  symbol = "üò±"
  effect = Name "scare" Area 1 Filter Enemy Lasting 5 PANIC
  cooldown = {25 51}
  sound = "SPELL_STR_BONUS"
}


# guardsman

MagExOneTimeAbility("magex_guardsman", "guardsman", "increases damage by +4", Permanent MAGEX_WARRIOR_GUARD , "üéØ")

"magex_guard_defend"
{
  symbol = "üõ°"
  effect = Name "defend allies" Area 1 Filter Not Enemy Lasting 5 MAGEX_DEFEND_ALLY
  cooldown = {25 51}
  sound = "SPELL_DEX_BONUS"
}


# berserkir

"magex_warrior_berserkir"
{
  symbol = "üí™"
  effect = Name "berserkirs rage" Lasting 40 MAGEX_WARRIOR_BERSERKIR
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}

"magex_warrior_berserkir_haste"
{
  symbol = "üèÉ"
  effect = Lasting 40 SPEED
  cooldown = {25 51}
  sound = "SPELL_SPEED_SELF"
}


# explorer

MagExOneTimeAbility("magex_explorer", "explorer", "allows you to explore", Chain {Permanent DISARM_TRAPS_SKILL Permanent EXPLORE_SKILL}, "üéØ")

"magex_explorer_healing"
{
  symbol = "‚ù§Ô∏è"
  effect = Heal { FLESH 0.5 }
  cooldown = {10 31}
  sound = "SPELL_HEALING"
}


# coward

"magex_warrior_coward_hide"
{
  symbol = "üïµÔ∏è"
  effect = Name "hide" AI Health 0.6 1.0 1 1 {Lasting 5 INVISIBLE}
  cooldown = {10 31}
  sound = "SPELL_INVISIBILITY"
}

"magex_panicked_defense"
{
  symbol = "üí™"
  effect = Name "panicked defense" Lasting 40 MAGEX_PANICKED_DEFENSE
  cooldown = {30 81}
  sound = "SPELL_DEX_BONUS"
}


# honorless

"magex_warrior_dirty_trick"
{
  symbol = "üï∂Ô∏è"
  effect = Name "dirty trick" Lasting 5 BLIND
  cooldown = {30 81}
  range = 1
}

"magex_hidden_blade"
{
  symbol = "üò±"
  effect = Name "hidden blade" Description "Stabs with hidden blade" Chain {
						Damage DAMAGE STAB
						Lasting 10 POISON}
  range = 1
  cooldown = {10 42}
}


# acrobat

"magex_warrior_acrobat_jump"
{
  symbol = "üëü"
  effect = Name "jump" Jump
  range = 3
  cooldown = {25 51}
  message = "jump" "jumps"
  type = ABILITY
}

"magex_warrior_acrobat_escape" 
{
  symbol = "‚úàÔ∏è"
  effect = Name "escape" AI Health 0.6 1.0 1 1 { Escape {3} Heal { FLESH 0.2 }}
  cooldown = {50 101}
  sound = "SPELL_TELEPORT"
}


# conscript

MagExOneTimeAbility("magex_conscript_distill", "distillation", "allows to distill", Chain {Permanent MAGEX_CONSCRIPT_WORK Permanent DISTILLATION_SKILL}, "üéØ")
MagExOneTimeAbility("magex_conscript_drunk", "liquid courage", "find power of liquid courage!", Chain {Permanent MAGEX_CONSCRIPT_DRUNK}, "üéØ")

# gladiator

MagExOneTimeAbility("magex_gladiator_showman", "show", "to fight in the arena is to give an show", Chain {Permanent ENTERTAINER}, "üéØ")

"magex_gladiator_triumf"
{
  symbol = "üò±"
  effect = Name "for glory" Chain{{Area 1 Filter Enemy {Lasting 5 PANIC}} {Area 1 Filter Not Enemy {Lasting 40 HIGH_MORALE}}}
  cooldown = {25 51}
  sound = "SPELL_STR_BONUS"
}

# spellblade

MagExOneTimeAbility("magex_spellblade_attack", "spellblade", "let magic flow trough your blade", Chain {Permanent SPELL_DAMAGE}, "üéØ")

"magex_spellblade_missile"
{
  symbol = "‚•á"
  effect = MinDistanceFromStrongEnemy(2) Name "magic missile" Description "Shoots a magic missile"{  
  TryNoFriendlyFire(
    {
      CreatureMessage {"are hit by the missile" "is hit by the missile"}
      Damage DAMAGE SPELL
    },
    CreatureMessage {"are spared by the missile" "is spared by the missile"}
  )}
  fx = {MAGIC_MISSILE}
  range = 4
  cooldown = {5 21}
  sound = "SPELL_BLAST"
}

# Brute

MagExOneTimeAbility("magex_brute_1", "brute", "increases damage by +4", Permanent MAGEX_WARRIOR_BRUTE_1 , "üéØ")
MagExOneTimeAbility("magex_brute_2", "brute", "increases damage by +4", Permanent MAGEX_WARRIOR_BRUTE_2 , "üéØ")

# Witch Hunter

"magex_withc_hunter_shoot_bolt"
{
  symbol = "‚áæ"
  effect = MinDistanceFromStrongEnemy(4) Name "shoot bolt" Description "Shoots a bolt"
      Chain{
	  { Caster Lasting 0 "MAGEX_LIGHTNING_SPELL"}
      TryNoFriendlyFire(
        {
          CreatureMessage { "are hit by the bolt" "is hit by the bolt"}
          Damage RANGED_DAMAGE SHOOT
        },
        CreatureMessage { "are spared by the bolt" "is spared by the bolt"}
      )}
  range = 7
  cooldown = 6
  maxHits = 1
  projectileViewId = {"arrow"}
  message = "shoot a bolt" "shoots a bolt"
  type = ABILITY
}

"magex_witch_hunter_magic"
{
  symbol = "üîÆ"
  effect = Name "disrupt magic" Lasting 5 MAGIC_CANCELLATION
  range = 2
  cooldown = {50 151}
  sound = "SPELL_STR_BONUS"
}

###########################################################
# 					non school spell					  #
###########################################################

"magex_banshee_scream"
{
  symbol = "üë§"
  effect =  Name "banshee scream" Area 4   Filter BodyMaterial FLESH {
    Chance 0.2 Lasting 40 INSANITY
	Lasting 40 PANIC
    Lasting 40 MAGEX_LOW_MORALE
    }
  cooldown = 30
  sound = "SPELL_BLAST"
}

###########################################################
# 					add spell							  #
###########################################################


# add spell

MagExOneTimeAbility("magex_warrior_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_thug"
	AddSpellSchool "magex_guardsman"
	AddSpellSchool "magex_fighter" 
	AddSpellSchool "magex_berserkir" 
	AddSpellSchool "magex_explorer" 
	AddSpellSchool "magex_coward" 
	AddSpellSchool "magex_honorless" 
	AddSpellSchool "magex_acrobat" 
	AddSpellSchool "magex_conscript" 
	AddSpellSchool "magex_gladiator" 
	AddSpellSchool "magex_brute" 
	AddSpellSchool "magex_paladin" 
	AddSpellSchool "magex_witch_hunter" 
 }}, "üßõ")

MagExOneTimeAbility("magex_warrior_barbarian_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_thug"
	AddSpellSchool "magex_fighter" 
	AddSpellSchool "magex_berserkir" 
	AddSpellSchool "magex_explorer" 
	AddSpellSchool "magex_coward" 
	AddSpellSchool "magex_honorless" 
	AddSpellSchool "magex_gladiator" 
	AddSpellSchool "magex_brute" 
 }}, "üßõ")
  
MagExOneTimeAbility("magex_priest_creature_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_demon_worship"
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_the_emperor_worship"
 }}, "üßõ")
 
MagExOneTimeAbility("magex_priest_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_shamanism"
	AddSpellSchool "magex_shamanism"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_demon_worship"
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_angel_worship" 
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_the_emperor_worship"
 }}, "üßõ")

MagExOneTimeAbility("magex_evil_priest_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_shamanism"
	AddSpellSchool "magex_shamanism"	
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_angel_worship"
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_demon_worship" 
	AddSpellSchool "magex_demon_worship" 
	AddSpellSchool "magex_demon_worship" 
	AddSpellSchool "magex_demon_worship" 
 }}, "üßõ")

MagExOneTimeAbility("magex_goblin_priest_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_angel_worship"
	AddSpellSchool "magex_demon_worship" 
	AddSpellSchool "magex_demon_worship" 
	AddSpellSchool "magex_demon_worship" 
	AddSpellSchool "magex_demon_worship" 
 }}, "üßõ")

MagExOneTimeAbility("magex_shaman_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_shamanism"
	AddSpellSchool "magex_shamanism"	 
	AddSpellSchool "magex_shamanism"
	AddSpellSchool "magex_shamanism"	 
 }}, "üßõ")

MagExOneTimeAbility("magex_barbarian_shaman_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_shamanism"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_bear_worship"	
 }}, "üßõ")
 
MagExOneTimeAbility("magex_dead_priest_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_demon_worship"
	AddSpellSchool "magex_demon_worship"
	AddSpellSchool "magex_shamanism"
	AddSpellSchool "magex_shamanism"	
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_angel_worship"
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_rot_cult"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_death_cult"
 }}, "üßõ")

MagExOneTimeAbility("magex_random_holy_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
	AddSpellSchool "magex_ancestor_worship"
	AddSpellSchool "magex_demon_worship"
	AddSpellSchool "magex_shamanism"	
	AddSpellSchool "magex_bear_worship"
	AddSpellSchool "magex_nature_worship"
	AddSpellSchool "magex_angel_worship"
	AddSpellSchool "magex_death_cult"
	AddSpellSchool "magex_the_emperor_worship"
	AddSpellSchool "magex_rot_cult"
 }}, "üßõ")
 
MagExOneTimeAbility("magex_dwarf_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "mage"
 	AddSpellSchool "magex_nymphomancy"
	AddSpellSchool "magex_electromancy"
	AddSpellSchool "magex_pyromancy"
	AddSpellSchool "magex_cryomancy"
	AddSpellSchool "magex_corossiomancy"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_geomancy"
	AddSpellSchool "magex_hydromancy"
	AddSpellSchool "magex_transmutation"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_necromancy"
	AddSpellSchool "magex_fell_sorcery"
 }}, "üßõ")
 
 
MagExOneTimeAbility("magex_spell_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_nymphomancy"
 	AddSpellSchool "magex_wild_sorcery"
 	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "mage"
	AddSpellSchool "magex_electromancy"
	AddSpellSchool "magex_pyromancy"
	AddSpellSchool "magex_cryomancy"
	AddSpellSchool "magex_corossiomancy"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_geomancy"
	AddSpellSchool "magex_hydromancy"
	AddSpellSchool "magex_transmutation"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_necromancy"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "dwarf"
 }}, "üßõ")
 
MagExOneTimeAbility("magex_keeper_spell_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_wild_sorcery"
 	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_electromancy"
	AddSpellSchool "magex_pyromancy"
	AddSpellSchool "magex_cryomancy"
	AddSpellSchool "magex_corossiomancy"
 	AddSpellSchool "magex_nymphomancy"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_geomancy"
	AddSpellSchool "magex_hydromancy"
	AddSpellSchool "magex_transmutation"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_necromancy"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "dwarf"
 }}, "üßõ")
 
MagExOneTimeAbility("magex_keeper_spell_school_sans_necro", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_wild_sorcery"
 	AddSpellSchool "magex_wild_sorcery"
 	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_cryomancy"
	AddSpellSchool "magex_cryomancy"
	AddSpellSchool "magex_corossiomancy"
	AddSpellSchool "magex_corossiomancy"
	AddSpellSchool "mage"
	AddSpellSchool "magex_electromancy"
	AddSpellSchool "magex_pyromancy"
	AddSpellSchool "magex_geomancy"
	AddSpellSchool "magex_hydromancy"
 	AddSpellSchool "magex_nymphomancy"
	AddSpellSchool "magex_transmutation"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "dwarf"
 }}, "üßõ")

MagExOneTimeAbility("magex_keeper_spell_school_necro_keeper", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_wild_sorcery"
 	AddSpellSchool "magex_wild_sorcery"
	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_cryomancy"
	AddSpellSchool "magex_cryomancy"
	AddSpellSchool "magex_corossiomancy"
	AddSpellSchool "magex_corossiomancy"
	AddSpellSchool "mage"
	AddSpellSchool "magex_electromancy"
	AddSpellSchool "magex_pyromancy"
	AddSpellSchool "magex_geomancy"
	AddSpellSchool "magex_hydromancy"
 	AddSpellSchool "magex_nymphomancy"
	AddSpellSchool "magex_transmutation"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "dwarf"
 }}, "üßõ")
 
 MagExOneTimeAbility("magex_necro_school", "pick spellschool", "gets random magex_spell_school.", { 
 ChooseRandom {
 	AddSpellSchool "magex_necromancy"
	AddSpellSchool "magex_necromancy"
	AddSpellSchool "magex_necromancy"
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
 	AddSpellSchool "magex_toximancy"
 	AddSpellSchool "magex_plaguemancy"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "magex_fell_sorcery"
	AddSpellSchool "zombie mage"
 	AddSpellSchool "zombie mage"
	AddSpellSchool "zombie mage"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_umbramancy"
	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_luxomancy"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "magex_illusionism"
	AddSpellSchool "mage"
 	AddSpellSchool "magex_wild_sorcery"
	AddSpellSchool "magex_electromancy"
	AddSpellSchool "magex_pyromancy"
	AddSpellSchool "magex_cryomancy"
 	AddSpellSchool "magex_nymphomancy"
	AddSpellSchool "magex_corossiomancy"
	AddSpellSchool "magex_geomancy"
	AddSpellSchool "magex_hydromancy"
	AddSpellSchool "magex_transmutation"
	AddSpellSchool "dwarf"
 }}, "üßõ")
 
 
 
 

# modified spells
 
 "healing" modify
{ 
  symbol = "‚ù§Ô∏è"
  effect = Filter Not LastingEffect MAGEX_NECROTIC_SATURATION Heal { FLESH }
  cooldown = {10 31}
  sound = "SPELL_HEALING"
}
"advanced healing" modify
{
  upgrade = "healing"
  symbol = "‚ù§Ô∏è"
  effect = Name "advanced healing" Filter Not LastingEffect MAGEX_NECROTIC_SATURATION  Heal { FLESH }
  range = 1
  targetSelf = true
  cooldown = {10 31}
  sound = "SPELL_HEALING"
}
"expert healing" modify
{
  upgrade = "advanced healing"
  symbol = "‚ù§Ô∏è"
  effect = Name "expert healing" Filter Not LastingEffect MAGEX_NECROTIC_SATURATION  Heal { FLESH }
  targetSelf = true
  range = 4
  cooldown = {10 31}
  sound = "SPELL_HEALING"
}
"group healing" modify
{
  symbol = "üíï"
  effect = Name "group healing" Area 2 Filter Not Enemy {Filter Not LastingEffect MAGEX_NECROTIC_SATURATION Heal { FLESH }}
  cooldown = {25 51}
  sound = "SPELL_HEALING"
}
